asyncapi: 2.4.0
info:
  title: asyncapiImdb client
  version: 1.0.0
  description: This app creates a client that subscribes to the server for getting top 10 trending/upcoming anime.
servers:
  trendingAnimeServer:
    url: http://localhost:8081
    protocol: http
  upcomingAnimeServer:
    url: http://localhost:8082
    protocol: http
  dummy:
    url: ws://localhost:9000
    protocol: ws
x-remoteServers:
  - trendingAnimeServer
  - upcomingAnimeServer
channels:
  /test:
    bindings:
      ws:
        bindingVersion: 0.1.0
    publish:
      operationId: trendingAnimeListController
      message:
        $ref: '#/components/messages/test'
  trendingAnime:
    bindings:
      http:
        type: request
        method: POST
        bindingVersion: 0.1.0
    publish:
      operationId: trendingAnimeListController1
      message:
        $ref: "#/components/messages/trendingAnime"
    subscribe:
      message:
        payload:
          type: object
  upcomingAnime:
    bindings:
      http:
        type: request
        method: POST
        bindingVersion: 0.1.0
    publish:
      operationId: upcomingAnimeListController
      message:
        $ref: "#/components/messages/upcomingAnime"
    subscribe:
      message:
        payload:
          type: object
components:
  messages:
    test:
      payload:
        type: object
        properties:
          name:
            type: string
    trendingAnime:
      summary: Data required to populate trending anime
      payload:
        type: object
        required:
          - query
          - body
        properties:
          query:
            type: object
            required:
              - name
              - rating
              - genre
              - studio
            properties:
              name:
                type: string
                description: name of the anime.
              rating:
                type: string
                description: rating of the show.
              genre:
                type: string
                description: The genre of anime.
              studio:
                type: string
                description: The studio of anime.
          body:
            type: object
            required:
              - name
              - rating
              - genre
              - studio
            properties:
              name:
                type: string
                description: name of the anime.
              rating:
                type: number
                description: rating of the show.
              genre:
                type: string
                description: The genre of anime.
              studio:
                type: string
                description: The studio of anime.
    upcomingAnime:
      summary: Data required to populate upcoming anime
      payload:
        type: object
        required:
          - query
          - body
        properties:
          query:
            type: object
            required:
              - name
              - genre
              - studio
            properties:
              name:
                type: string
                description: name of the anime.
              genre:
                type: string
                description: The genre of anime.
              studio:
                type: string
                description: The studio of anime.
          body:
            type: object
            required:
              - name
              - genre
              - studio
            properties:
              name:
                type: string
                description: name of the anime.
              genre:
                type: string
                description: The genre of anime.
              studio:
                type: string
                description: The studio of anime.
